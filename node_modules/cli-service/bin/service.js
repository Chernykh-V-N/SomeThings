#!/usr/bin/env node

const rawArgv = process.argv.slice(2)
const args = require('minimist')(rawArgv, {
  string: [
    'mode',
    'context'
  ]
})

process.env.BUILD_CONTEXT = args.context ? args.context : process.cwd()
// mode ->  development production debug
const run = require('../lib/commands')
const command = args._[0]

switch (command) {
  case 'dev':
    process.env.NODE_ENV = 'development'

    run(command)

    break
  case 'build':
    const mode = args.mode ? args.mode : 'development'

    process.env.NODE_ENV = mode

    run(command, mode)
    break
  default:
    console.log('unknow command.')
}